// This is your Prisma schema file for ms-memberships
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  output   = "../../prisma/generated/ms-memberships"
}

model Plan {
  id           String     @id @default(uuid())
  nombre       String
  descripcion  String?
  precio       Float
  duracionDias Int
  beneficios   String[]
  activo       Boolean    @default(true)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  membresias   Membresia[]
}

model Membresia {
  id               String          @id @default(uuid())
  usuarioId        String
  planId           String
  fechaInicio      DateTime
  fechaVencimiento DateTime
  estado           EstadoMembresia
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
  stripeSessionId  String?
  plan             Plan           @relation(fields: [planId], references: [id])

  @@index([usuarioId])
}

enum EstadoMembresia {
  ACTIVA
  VENCIDA
  CANCELADA
  PENDIENTE_PAGO
}